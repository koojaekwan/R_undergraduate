---
title: "Computerized Statistics"
subtitle: "Chapter 1. System and Model"
author: "Jae Kwan Koo"
output:
  html_document:
    fig_height: 6
    fig_width: 10
    highlight: textmate
    toc: yes
    toc_depth: 3
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=T, fig.align = "center", message=F, warning=F, fig.height = 8, cache=T, dpi = 300, dev = "png")
```


##1.1 System

단순히 시스템은 문제가 주어진 현재 상황이다. 우리는 이 시스템에 주어진 문제를 해결 해보자는 것이다.  
예를 들면, "오늘의 날씨는 어떻기 때문에 내일은 비가 올 것이다." 와 같이 구체적으로 표현하여 논리적으로 파악하고 싶은 것이다.  

원을 하나의 시스템이라고 한다면 경계선 내부에는 내부 구성요소 간의 복합적인 상호작용을 할 것이다.  
시스템 바깥으로부터도 서로 영향을 주고 받을 있다. 하지만, 일반적으로 내부에서 영향을 받는다.  
크게 시스템은 내부적인 요인, 외부적인 요인으로 구분할 수 있지만 전체적으로 크게 구성요소로 볼 수 있다.

###System Identification

시스템의 구성요소 파악이 가장 중요하다. 또한, 구성요서 간 관계 및 상호작용은 존재할 것이다.  
내적 관계, 외적 관계 또한 파악이 필요하지만, 파악하는 것은 쉽지 않다.  
날씨안의 구성요소 간 관계와 같은 자연적인 관계보다 공장에서의 인위적인 공정, 설비 등이 더 파악하기 쉽다.  
구성요소 간의 관계는 확률적인 모의실험을 통해 문제 해결하려고 노력해야 한다.  

* 구성요소 : 시스템을 구성하고 있는 부품. 시스템 내부의 구성요소와 외부의 구성요소. 단순히 구성요소라고도 한다.

* 속성 : 속성은 보통 논리적(T,F) 또는 수치적으로 표현할 수 있다. 구성요소는 값을 가질 수 있는데 이 구성요소의 특징을 나타낸다.

구성요소의 관측된 값을 속성이라고 한다면, 변수를 구성요소라고 할 수 있다.

* 외생변수 : 시스템 외부로 부터 내부에 영향을 주는 변수를 말한다. 즉, 외적 구성요소이다.

* 내생변수 : 시스템 내부의 구성요소이다.

일방적으로 영향을 주는 변수를 외생변수라고 부르고 영향을 받아 시스템 내부에서 변화하는 변수를 내생변수라고 부른다. 하지만, 굳이 딱 잘라 구별하지는 않는다.


###Hospital Example  

속성 파악이 중요하다고 했는데, 그렇다면 "많이 파악할수록 좋은 것인가?" 라는 질문을 던저볼 수도 있다.  
구성요소 파악도 '적당히'하는 말을 쓰곤 한다.  

우리는 터무니 없이 긴 환자 대기시간과 같은 시스템 문제들을 생각해볼 수 있다.  
이러한 시스템을 파악하여 문제해결을 하려고 하는 것인데,  
결국 이것을 통해 하고자 하는 것은 병원에서 환자들을 더 많이 치료해 돈을 버는 것이다.  
즉, "모형화".  

모형을 단순화해서도 적합이 잘된다고 한다면, 복잡한 것 보다는 단순한 것이 더 좋다.  
그래서 모형을 구축할 때, 적합뿐만 아니라, 단순화에 대해서도 생각하게 된다.  

* 진료 대기시간 등 병원 안에서 이루어 지는 일들은 내생변수라고 볼 수 있다.  
* 환자 도착시간 등 병원 안에서 이루어 지지 않는 일들은 외생변수라고 볼 수 있다.  

먼저 시스템화를 한 후, 모형화를 하는 것이 목적이다.  

###Temporary or Permanent  

고정된 시스템과 유동적인 시스템이 있다.  

* 주사위 실험 : 독립적인 확률실험에 속하기 때문에 이런 시스템은 변화하지 않는다. 즉, 고정된 상태라고 말한다.  
* 무한 모집단에서 유한개 표본 임의 추출 : 확률표본이기 때문에 각 표본추출 확률은 동일하다. 따라서 고정된 시스템이라고 한다.  
* 이차원 확률보행 실험 : 동서남북으로 가는 사건들은 서로 영향이 없지만 만약, 동쪽으로 먼저 움지이고 북쪽으로 간다면 앞선 사건에 영향을 받기 때문에(시간에 영향을 받기 때문에) 일시적인 상태로 볼 수 있다.  
* 우체국 직원의 서비스 시간 측정 : 저녁에 가까울수록 일의 능률이 떨어져 처리시간이 늘어날 수 있다. 업무처리속도를 이야기하게 되면 시간에 영향을 받기 때문에 위와 마찬가지로 고정된 상태가 아닌 일시적인 상태로 볼 수 있다.  

시간의 흐름에 따라 변화하게 되는 일시적인 상태를 배제하고 고정된 상태만 가지고 이야기를 해보자.  

###Series system  

현 상태에서 작동하고 있는지(T), 아닌지(F)를 수치로 표현하여 1,0으로 하자.  
작동할 확률이 높다는 것은 제품에 대한 신뢰도가 높다라고 할 수 있다.  
i번째 구성요소가 작동할 확률을 i번째 구성요소의 신뢰도(reliability)라고 한다.  

$$
0\leq p \leq1
$$
p가 위의 부등호의 범위에 들어가는 것은 확률 입장에서 보면 당연하다. 또한, 1에 가까울수록 좋으면 신뢰도가 높다. 마찬가지로, 0에 가까우면 신뢰도가 매우 떨어진다고 이야기한다.  

전체 공장설비가 작동할 확률을 이야기 했을 때, 직렬시스템이라면 모든 구성요소가 작동을 해야 한다. 즉, 모두 다 1의 값을 가지고 있어야 작동한다. 여기에 대한 신뢰도(작동할 확률)에 대해 구하자면, 모든 구성요소가 작동할 확률의 곱으로 나타날 것이다.  
$$
p(\phi=1) = \Pi p_i
$$
즉, 이 값이 클수록 전체 시스템에 대한 신뢰도가 높다.  

###parallel system  

병렬시스템은 이전보다 조금 복잡하다.  
먼저 서로 독립이라는 가정을 했다. 독립이 아니라면 내적 구성요소, 외적 구성요소 등 과의 상호작용을 고려해야한다.  
5개 구성요소 중 어느 하나라도 작동되기만 하면 시스템은 작동한다.  
$$
p(\phi=1)=1-\Pi(1-p_i)
$$
직렬과 병렬이 같이 있는 경우를 생각해볼 수 있다.  
만약 1번 구성요소와 2,3번이 병렬로 되어 있는 그룹과 직렬로 이어져있는 경우이다.  
$$
p(\phi=1)=p_1\times(1-(1-p_2)(1-p_3))
$$  
로 해결할 수 있다. 자세한 그림은 PDF파일을 참고하면 된다.  



###Diamond system

직렬같기도 하고 병렬 같기도 하다. 가운데 3번째 구성요소가 작동하는지 여부에 따라 나누어 생각해야 한다.  
3번째 작동하지 않으면 오른쪽그림을 생각할 수 있을 것이다. 이 경우, 병렬구조가 큰 틀이다.  
첫번째 그림을 놓고보면 병렬처럼 보이지만, 3번째를 통과하기 때문에 큰 틀에서 보면 병렬은 아니다.  
조건부 확률로 3번째가 작동하는지 나누어 줄 수 있다.  

~~*물론 작은 공장을 가더라도 위 예제보다 시스템이 더 복잡하기 때문에 신뢰도를 구하는데 조금 힘들 수 있다.*~~  


###More complexed model  

두 시스템은 구성요소 1,2,3번째가 각 두개씩 사용되었다.  
두 그림은 단순히 배치만 다르게 보인다. 그래서 어느쪽 시스템을 사용해야 하는지 신뢰도를 계산하여 판단해야 한다.  

```{r, out.width='100%', fig.align='center'}
knitr::include_graphics('https://raw.githubusercontent.com/koojaekwan/jaekwan-s-R/master/Computerized_Statistics/Chapter1/1.1system.PNG')
```

```{r}
p<-seq(0,1,0.001)
h1<-(1-(1-p)^2)*(1-(1-(1-(1-p)^2))^2)
h2<-1-(1-p*(1-(1-p)^2))^2

h.dif<-h1-h2
summary(h.dif)
```

```{r}
result<-cbind(p,h1,h2,h.dif)

par(mfrow=c(1,2))
plot(p,h1,ylab='h',type='l',col='red')
text(0.4,0.7,'h1')
lines(p,h2)
text(0.4,0.3,'h2')

plot(p,h.dif, type='l', ylim = c(0,0.15),ylab='h1-h2')
```  
시뮬레이션을 하니 h1이 신뢰도가 더 높아 보인다.  
신뢰도의 차이는 'p= 0.3~0.4'에서 차이가 많이 나는 것 처럼 보인다.





